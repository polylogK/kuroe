# kuroe

kuroe は軽量かつステートレスな競技プログラミングの作問支援ツールです。
kuroe では，テストケース生成・バリデーション・想定解生成・ジャッジが可能です。

## サブコマンド：generate

ジェネレータからテストケースを自動的に生成します。

生成ケース数はオプションで指定可能ですが，ファイル名で指定することも可能です。`kuroe.5.cpp` のようにジェネレータの拡張子の直前に数字が指定されている場合は，その数字の個数だけ生成されます（この場合 5 個）。

```bash
kuroe generate main.py -n 5 # 5 個のテストケースが生成される
kuroe generate ./gendir/ -r # gendir 以下のすべてのジェネレータで生成される
```

- 引数
  - `generators`：ジェネレータを含むディレクトリ or ジェネレータへのパス（複数可能）
- オプション
  - `-r`, `--recursive`：再帰的にジェネレータを探索するかどうか
  - `-n`, `--count`：ファイルごとに n 個生成する。デフォルトは 1。ただしファイル名で指定されている場合はファイル名が優先。
  - `-o`, `--outdir`：出力先ディレクトリ。デフォルトは `./testcases/input`
  - `-s`, `--seed`：seed, seed+1, ..., seed+(n-1)。デフォルトは 0
  - `-l`, `--language`：カスタム言語
- 出力
  - `outdir` に入力が生成される

## サブコマンド：validate

TODO：実装

- 引数
  - `validator`：検証器へのパス（1 つ）
  - `testcase`：テストケースを含むディレクトリ or テストケースへのパス（複数可能）
- オプション
  - `-r`, `--recursive`：再帰的にテストケースを探索するかどうか
  - `-l`, `--language`：カスタム言語
- 出力
  - バリデーション結果を標準出力に表示

## サブコマンド：solve

TODO：実装

- 引数
  - `solver`：想定解へのパス（1 つ）
  - `testcase`：テストケースを含むディレクトリ or テストケースへのパス（複数可能）
- オプション
  - `-r`, `--recursive`：再帰的にテストケースを探索するかどうか
  - `-o`, `-outdir`：出力先ディレクトリ。デフォルトは `./testcases/answer`
  - `-l`, `--language`：カスタム言語
- 出力
  - `outdir` に結果が生成される

## サブコマンド：judge

TODO：実装

備考：浮動小数点ジャッジ・インタラクティブなど未対応。ジャッジコードを指定可能にする予定。

- 引数
  - `solver`：ソルバを含むディレクトリ or ソルバへのパス（複数可能）
  - `testcase`：テストケースを含むディレクトリ（1 つ）。再帰的に探索される。`.in` と `.ans` が揃っているケースのみジャッジ
- オプション
  - `-o`, `--outdir`：出力先ディレクトリ。デフォルトは `./testcases/output`
  - `-l`, `--limit`：タイムリミット（秒）。デフォルトは 2 秒
- 出力
  - `outdir` にソルバごとの結果が格納される

## カスタム言語

kuroe はデフォルトで `C, C++, Python, Txt(txt|in)` に対応しています。
これら以外の言語を使用したい場合や，コマンドを修正したい場合はカスタム言語機能を利用することができます。

カスタム言語を使用するには `-language`, `-l` オプションを利用して，拡張子（正規表現）・コンパイルコマンド・実行コマンドを `,` で区切り指定します。以下の例を参考にしてください。

### 例 1：clang++ を使用する

kuroe はデフォルトでは C++ のコンパイルに g++ を利用しますが，以下のようなオプションによって clang++ によるコンパイルを行うことが可能です。
最初の要素が拡張子の指定です。二個目から最終要素の一個前までがコンパイルコマンドの指定，最終要素が実行コマンドの指定となります。

- `-l (cpp|cc),"clang++ %(target)","./a.out %(seed)"`

### 例 2：pypy を使用する

コンパイルコマンドは省略可能です。

- `-l py,"pypy %(target) %(seed)"`

## リファレンス兼謝辞

- <https://rime.readthedocs.io/ja/latest/>
- <https://github.com/terry-u16/pahcer>
- <https://github.com/riantkb/testlib_for_yukicoder>
